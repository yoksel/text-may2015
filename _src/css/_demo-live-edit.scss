$textarea-width: 60%;
$textarea-fontsize: $base-size * .9;
$textarea-lineheight: 1.4;
$hl-color: palegoldenrod;

$textarea-oneline: $textarea-fontsize * $textarea-lineheight * .99;

@mixin textarea-height ( $lines ){
    height: $textarea-oneline * $lines;
    }

@mixin textarea-bg {
    background: linear-gradient(white $textarea-oneline, #EEE $textarea-oneline) repeat;
    background-size: 100% $textarea-oneline*2;
    }

@mixin highlight-lines( $lines ) {
    $gradients: null;
    $hl-begin: null;
    $hl-end: null;

    @each $line in $lines {
        $line: $line - 1;
        $hl-begin: $textarea-oneline * $line;
        $hl-end: $textarea-oneline * ($line + 1);

        $gradients: append($gradients, linear-gradient(
                transparent $hl-begin,
                $hl-color $hl-begin, $hl-color $hl-end,
                transparent $hl-end), comma);
        }

    position: relative;
    &:before {
        background: $gradients;
        background-position: 0 .2em;
        }
}

@mixin editable ($pgpos: 99.5% top){
    background-size: 30px 30px;
    background-repeat: no-repeat;
    background-position: $pgpos;
    }

.live-editor__code {
    display: block;
    position: relative;
    box-sizing: border-box;
    padding: 5px;
    background: transparent;
    box-shadow: inset 0 0 10px rgba(0,0,0, .5);
    border-radius: 5px;
    }

/* Demo Edit Properties
------------------------- */
$lh_koeff: 1.7;
$lh_em: 1.8em;

.live-editor {
    &__code {
        width: 100%;
        height: 2em;
        margin: 0 0 20px;
        background: #FFF;
        border: 0;
        outline: none;
        line-height: $lh_koeff;
        font-family: 'Anka Coder',monospace;
        font-size: 100%;
        transition: .5s;
        @include editable(99% center);
        &:focus {
            background-color: $hl-color;
            }
        }

    &__code--smalltext {
        font-size: 80%;
        }

    @for $i from 2 through 10 {
        &__code--#{$i}-lines {
        height: $lh_em * $i;
        }
    }
}

/* Demo Live
------------------------- */

.demo--live {
    margin-bottom: $base-size;
    &:after {
        @include clear;
        }
    .live-editor__content {
        margin-top: 2em;
        }
    .live-editor__view {
        svg {
            display: block;
            width: 100%;
            margin: 0 auto;
            max-height: 100%;
            }
        }
    .live-editor__textfield {
        width: 100%;
        border: 0 solid #555;
        outline: none;
        font-family: 'Anka Coder', monospace;
        font-size: $textarea-fontsize;
        line-height: $textarea-lineheight;
        color: #000;
        }
    .live-editor__code {
        @include textarea-height (5.5);
        @include editable;
        }

    pre {
        float: right;
        width: 65%;
        margin-top: 1em;
        }
    B {
        display: inline-block;
        font: bold .8em/1 Arial !important;
        }
    }